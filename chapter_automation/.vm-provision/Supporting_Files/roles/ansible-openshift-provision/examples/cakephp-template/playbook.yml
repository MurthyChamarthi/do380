---
- hosts: localhost
  connection: local
  vars_files:
  - vars.yml
  roles:
  - role: openshift-provision
    openshift_clusters:
    - projects:
      - name: "{{ app_name }}"
        process_templates:
        - file: cakephp-mysql-example.template.yml
          parameters:
            NAME: "{{ app_name }}"
            # If we don't specify a value for the webhook secret it will
            # be autogenerated every time and so updated each time the
            # template is processed
            GITHUB_WEBHOOK_SECRET: "{{ app_build_github_webhook_secret }}"
            MEMORY_LIMIT: "{{ app_memory_limit }}"
